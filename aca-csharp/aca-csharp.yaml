kind: containerapp
location: eastus
name: album-api
resourceGroup: album-app
type: Microsoft.App/containerApps
tags:
  tagname: MVP
properties:
  kubeEnvironmentId: /subscriptions/x/resourceGroups/album-app/providers/Microsoft.App/managedEnvironments/x
  configuration:
    registries:
      - passwordSecretRef: registry-pass
        server: dapralbumacr.azurecr.io
        username: kendallroden
    secrets:
      - name: registry-pass
        value: x
    activeRevisionsMode: Single
    ingress:
      external: true
      allowInsecure: false
      targetPort: 80
      transport: Auto
  template:
    containers:
      - image: dapralbumacr
        name: album-api
        resources:
          cpu: 0.5
          memory: 1Gi
    scale:
      minReplicas: 1
      maxReplicas: 10
      rules:
        - name: httprule
          http:
            metadata:
              concurrentRequests: 5
